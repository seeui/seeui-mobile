{"version":3,"names":[],"mappings":"","sources":["searchbox/SearchBoxDemo.js"],"sourcesContent":["/**\n * @file SearchBoxDemo\n * @author wuqi57(441984145@qq.com)\n * @time 17/7/25\n */\n\nimport {h, Component} from 'preact';\n\nimport SearchBox from './SearchBox';\n\nimport fetchJsonp from 'fetch-jsonp';\n\n\nexport default class SearchBoxDemo extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value: '',\n            sugList: []\n        };\n    }\n\n    /**\n     * 渲染sug内容\n     *\n     * @private\n     * @param {Function} resolve Suggestion 从展示恢复到收起的方法\n     * @return {Array} Suggestion 列表\n     */\n    renderSugContent(resolve) {\n        const suggestionList = this.state.sugList;\n        let sugContent = [];\n\n        suggestionList.map(item => {\n            sugContent.push(\n                <div className=\"suggestion-item\" onClick={() => resolve(item)}>\n                    {item}\n                </div>\n            );\n        });\n\n        return sugContent;\n    }\n\n\n    /**\n     * 获取sug数据\n     *\n     * @private\n     * @param {string} value 搜索query\n     */\n    getSugList(value) {\n        fetchJsonp(`http://m.baidu.com/su?wd=${value.trim()}&ie=utf-8&json=1`)\n            .then(res => res.json())\n            .then(json => {\n                this.setState({\n                    sugList: json.s || []\n                });\n            });\n    }\n\n    render() {\n        return (\n            <div className=\"searchbox-demo\">\n                <SearchBox\n                    value={this.state.value}\n                    onGetSug={this.getSugList.bind(this)}\n                    onRenderSugContent={this.renderSugContent.bind(this)}\n                />\n            </div>\n        );\n    }\n}\n"],"file":"SearchBoxDemo.js"}